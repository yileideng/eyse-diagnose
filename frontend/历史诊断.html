<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="icon" type="image/png" href="./photograph/屏幕截图 2025-03-01 145911.png" sizes="16*16">
  <link rel="stylesheet" href="./css/general.css">
  <link rel="stylesheet" href="./css/right-bottom-group.css">
  <link rel="stylesheet" href="./css/diagnose-model.css">
  <link rel="stylesheet" href="./css/diagnose.css">
  <link rel="stylesheet" href="./css/ai.css">
  <title>历史诊断</title>
  <style>
    .container {
      scroll-behavior: smooth;
      position: absolute;
      top: calc(50px + 50%);
      left: 50%;
      transform: translate(-50%, -50%);
      width: 1532px;
      height: 733px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      overflow-y: scroll;
      gap: 77px;
      transition: all 0.5s ease;
      z-index: 1;
    }

    .container::-webkit-scrollbar {
      width: 0;
      background: transparent;
    }

    .row {
      display: flex;
      flex: 0 0 auto;
      flex-direction: row;
      align-items: center;
      justify-content: space-between;
      width: 100%;
      height: 328px;
      transition: all 0.5s ease;
      opacity: 0;

    }

    .row.show {
      opacity: 1;
      /* 显示时完全不透明 */
      transform: translateY(0);
      /* 恢复原位 */
    }

    .left {
      width: 328px;
      height: 328px;
      background: rgba(85, 85, 85, 0.4);
      border-radius: 50px 50px 50px 50px;

      display: flex;
      justify-content: center;
      align-items: center;
    }

    .right {
      position: relative;
      width: 1118px;
      height: 328px;
      /* width: 90vw;
      height: 90vh; */
      background: rgba(100, 100, 100, 0.4);
      border-radius: 50px 50px 50px 50px;

    }

    .contents {
      display: contents;
    }

    .detail {
      position: absolute;
      right: 40px;
      bottom: 40px;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: #ffffff;
      cursor: pointer;
      z-index: 10001;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 16px;
      font-weight: 500;
    }

    .right-big.expanded {
      position: absolute;
      top: 10%;
      left: 5%;
      /* top: 50%;
      left: 50%;
      transform: translate(-50%, -45%); */
      width: 90vw;
      height: 85vh;
      background: rgba(100, 100, 100, 0.4);
      border-radius: 50px 50px 50px 50px;
      z-index: 1000;
      display: flex;
      justify-content: center;
      align-items: center;
      transform-origin: right top;
      transition: all 0.8s cubic-bezier(0.68, -0.55, 0.27, 1.55);
      opacity: 1;
      transform: scale(1);
    }

    /* .right-big {
      transform-origin: right top;
      transition: all 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
    } */
    .right-big {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(70, 70, 70, 0.97);
      z-index: 1000;
      opacity: 0;
      transform: scale(0.8);
      transition: all 0.8s cubic-bezier(0.68, -0.55, 0.27, 1.55);
      backdrop-filter: blur(5px);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .overlay-mask {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.6);
      z-index: 999;
    }

    .row-animate-out {
      opacity: 0 !important;
      transform: translateX(100%) scale(0.8) !important;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .detail-active {
      position: absolute;
      background: #ff5555 !important;
      transform: scale(1.2);
      box-shadow: 0 0 15px rgba(255, 85, 85, 0.5);
      z-index: 1001;
    }

    /* 添加隐藏状态的样式 */
    .row.hidden {
      display: none;
    }

    .left.hidden {
      display: none;
    }

    .diagnose-content2 {
      padding: 20px;
      color: white;
      width: 100%;
    }

    .diagnose-content2 h3 {
      font-size: 24px;
      margin-bottom: 15px;
      text-align: center;
    }

    .diagnose-content2 img {
      margin: 20px 0;
      border-radius: 10px;
    }

    .error {
      color: #ff5555;
      text-align: center;
      padding: 20px;
    }


    .loading-spinner {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 40px;
      height: 40px;
      border: 4px solid #f3f3f3;
      border-top: 4px solid #ff5555;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    .summary-view {
      padding: 20px;
      color: #fff;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    .main-disease {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 15px;
      padding: 15px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      width: 900px;
    }

    .disease-name {
      font-size: 1.2em;
      color: #a0d8ff;
    }

    .probability {
      font-size: 1.5em;
      font-weight: bold;
      color: #4CAF50;
    }

    /* 展开视图样式 */
    .right-big .diagnose-report {
      max-height: 70vh;
      overflow-y: auto;
      padding: 20px;
    }

    .right-big .disease-table {
      margin-top: 20px;
      background: rgba(255, 255, 255, 0.9);
    }

    .transparent {
      opacity: 0;
      cursor: default;
      pointer-events: none;
    }

    .image-links {
      width: 500px;
      height: 70px;
      background: rgba(0, 0, 0, 0);
      border-radius: 15px;
      display: flex;
      justify-content: space-around;
      align-items: center;
      margin-top: 20px;
      margin-bottom: 40px;
      cursor: pointer;
      transition: all 0.3s ease;
      justify-self: center;
      overflow-x: auto;

    }

    .image-links:hover {
      background: #242424;
    }

    .image-links a {
      display: block;
      background: #302f2f23;
      width: 200px;
      height: 45px;
      border-radius: 5px;
      color: #fff;
      text-align: center;
      font-size: 22px;
      transition: all 0.3s ease;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
    }

    .image-links a:hover {
      background: #000;
    }

    .note {
      justify-self: center;
    }

    .diagnose-info {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    .prediction-group {
      margin: 30px 0;
      padding: 20px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 15px;
    }

    .prediction-group h4 {
      color: #a0d8ff;
      margin-bottom: 15px;
    }

    .reminder {
      color: #f3f3f3;
      font-size: 36px;
      text-align: center;
      font-weight: 600;
      font-family: '楷体', sans-serif;
    }

    /* 新增tooltip样式 */
    .detail-tooltip {
      position: absolute;
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 8px 12px;
      border-radius: 4px;
      font-size: 12px;
      white-space: nowrap;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s, transform 0.3s;
      z-index: 1002;
    }

    /* 右侧提示位置 */
    .detail:hover .detail-tooltip {
      opacity: 1;
      transform: translate(70px, -50%);
    }

    /* 动态提示文本 */
    .detail[data-processed="true"] .detail-tooltip {
      content: "点击查看完整报告";
    }

    /* 正在加载状态 */
    .detail.loading .detail-tooltip {
      content: "正在加载数据...";
      background: #4CAF50;
    }


    .row.temp-result {
      animation: slideIn 0.5s ease;
      background: rgba(100, 100, 100, 0.2);
    }

    @keyframes slideIn {
      from {
        transform: translateY(-100%);
      }

      to {
        transform: translateY(0);
      }
    }

    .search-highlight {
      box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
      animation: pulse 1.5s infinite;
    }

    @keyframes pulse {
      0% {
        transform: scale(1);
      }

      50% {
        transform: scale(1.02);
      }

      100% {
        transform: scale(1);
      }
    }

    .loading-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .loading-spinner2 {
      width: 40px;
      height: 40px;
      /* color: #000; */
      border: 4px solid #f3f3f3;
      border-top: 4px solid #3498db;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    .loading-message {
      position: absolute;
      font-family: 'Courier New', Courier, monospace;
      font-size: 18px;
      font-weight: 500;
      color: #393636;
      top: 55%;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    /* 禁用状态样式 */
    .ai-input[disabled],
    .send-btn[disabled] {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .id {
      text-align: center;
      font-size: 24px;
      font-weight: 600;
      margin-top: 20px;
      color: #b9d7df;
      font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
    }
  </style>
</head>

<body>
  <div class="background">

    <div class="backgroundMask">
      <div class="navbar navbar-expand-lg navbar-dark ">
        <a class="navbar-brand" href="#">
          <svg xmlns="http://www.w3.org/2000/svg" width="42.267" height="40.686" viewBox="0 0 42.267 40.686">
            <defs>
              <style>
                .a {
                  fill: none;
                  stroke: #fff;
                  stroke-miterlimit: 10;
                  stroke-width: 2.5px;
                }
              </style>
            </defs>
            <g transform="translate(-0.02 0)">
              <path class="a"
                d="M34.85,34.38a3.73,3.73,0,0,1,.49-.29,2.66,2.66,0,0,1,1.89-.21,2.54,2.54,0,0,1,1.46,1.21L41.24,39" />
              <path class="a"
                d="M27.4,20.61c0,4.66-1.38,8.44-3.07,8.44s-3.06-3.78-3.06-8.44,1.37-8.45,3.06-8.45S27.4,15.94,27.4,20.61Z" />
              <path class="a"
                d="M24.64,12.15c-9.09,0-16.45,3.8-16.45,8.46s7.42,8.45,16.56,8.45a27.1,27.1,0,0,0,5.67-.52C32.79,28,38.6,26.73,40,22.73a5.54,5.54,0,0,0,.29-2.2" />
              <path class="a"
                d="M40.27,20.72A19.43,19.43,0,0,0,34.65,6.53,20.59,20.59,0,0,0,21.27,1.25c-11.06,0-20,8.55-20,19.09,0,11.35,10.74,18.85,20,19.09a20.91,20.91,0,0,0,13.72-5.19" />
            </g>
          </svg>
        </a>
        <span class="brand"><strong>Eyes Diagnose</strong></span>
        <div class=" collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item ">
              <a class="nav-link" href="主页.html">主页 <span class="sr-only"></span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="诊断.html">诊断</a>
            </li>
            <li class="nav-item active">
              <a class="nav-link" href="历史诊断.html">历史诊断</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="个人信息.html">个人信息</a>
            </li>
            <li class="nav-item nav-search">
              <span class="search">搜索</span>
              <div class="search-bar">
                <span class="search-icon">

                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24">
                    <g fill="none" fill-rule="evenodd">
                      <path
                        d="M24 0v24H0V0zM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035q-.016-.005-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093q.019.005.029-.008l.004-.014l-.034-.614q-.005-.019-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z" />
                      <path fill="currentColor"
                        d="M10.5 2a8.5 8.5 0 1 0 5.262 15.176l3.652 3.652a1 1 0 0 0 1.414-1.414l-3.652-3.652A8.5 8.5 0 0 0 10.5 2M4 10.5a6.5 6.5 0 1 1 13 0a6.5 6.5 0 0 1-13 0" />
                    </g>
                  </svg>
                </span>
                <input type="text" class="search-input" placeholder="-搜索编号-">
              </div>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="container">
      <!-- 四行历史诊断病例的卡片元素 -->

      <div class="row">
        <div class="left">
          <div class="major1 major">
            <div class="tooltip">点击获取deepseek临床建议</div>
            <input type="file" id="zip-upload" hidden accept=".zip" multiple style="z-index: 1;">
            <svg t="1744121266789" class="icon" viewBox="0 0 1408 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
              p-id="4285" width="122" height="120">
              <path
                d="M1361.92 83.136c-14.272-7.04-20.416 6.272-28.736 12.992-2.816 2.24-5.248 5.12-7.68 7.68-20.8 22.336-45.056 36.864-76.8 35.136-46.464-2.56-86.08 12.032-121.152 47.616-7.552-43.904-32.256-70.08-69.888-86.912-19.712-8.768-39.68-17.472-53.376-36.48-9.664-13.44-12.288-28.48-17.216-43.264-3.008-8.96-6.08-18.112-16.32-19.712-11.2-1.728-15.552 7.68-19.968 15.424-17.536 32.128-24.32 67.52-23.68 103.296 1.6 80.448 35.52 144.576 103.04 190.144 7.68 5.312 9.6 10.56 7.168 18.176-4.608 15.68-10.048 30.976-14.912 46.592-3.072 10.112-7.68 12.352-18.304 8a308.224 308.224 0 0 1-97.28-66.176c-48-46.4-91.392-97.664-145.472-137.792a655.36 655.36 0 0 0-38.528-26.432c-55.232-53.76 7.232-97.792 21.632-103.04 15.104-5.376 5.312-24.128-43.52-23.936C652.032 24.704 607.36 41.024 550.4 62.72a156.8 156.8 0 0 1-26.048 7.68 542.016 542.016 0 0 0-161.408-5.696c-105.6 11.904-189.888 61.824-251.904 147.2C36.608 314.24 19.072 430.848 40.512 552.32c22.528 128 87.808 234.048 188.16 316.992 104 85.888 223.808 128 360.512 120 82.944-4.864 175.424-16 279.68-104.32 26.368 13.056 53.888 18.24 99.712 22.272 35.2 3.328 69.184-1.792 95.424-7.232 41.216-8.704 38.4-46.848 23.424-53.888-120.576-56.32-94.208-33.408-118.272-51.84 61.376-72.768 153.792-148.224 189.952-392.768 2.816-19.392 0.384-31.552 0-47.36-0.256-9.536 1.92-13.312 12.8-14.4a231.04 231.04 0 0 0 86.592-26.56c78.272-42.88 109.696-113.024 117.184-197.184 1.088-12.928-0.256-26.24-13.76-32.96z m-681.408 757.76c-116.928-92.096-173.696-122.368-197.12-120.96-21.888 1.152-17.984 26.304-13.184 42.624 5.12 16.128 11.648 27.328 20.8 41.408 6.464 9.408 10.752 23.424-6.272 33.92-37.76 23.424-103.232-7.872-106.24-9.472-76.288-44.8-140.032-104.192-184.96-185.344-43.264-78.08-68.48-161.92-72.576-251.328-1.152-21.632 5.184-29.312 26.688-33.152a265.6 265.6 0 0 1 85.696-2.24c119.296 17.472 220.928 71.04 306.048 155.52 48.768 48.32 85.504 105.92 123.392 162.176 40.256 59.776 83.648 116.672 138.88 163.392 19.392 16.32 35.072 28.8 49.92 37.952-44.928 5.056-119.872 6.08-171.008-34.496z m56.064-361.024a17.152 17.152 0 1 1 2.752 9.6 16.896 16.896 0 0 1-2.752-9.664z m174.08 89.472a102.72 102.72 0 0 1-33.024 8.96 70.528 70.528 0 0 1-44.736-14.272c-15.296-12.8-26.176-19.968-30.848-42.496a99.264 99.264 0 0 1 0.832-32.96c4.032-18.368-0.384-30.08-13.248-40.768-10.624-8.768-23.872-11.072-38.592-11.072a31.168 31.168 0 0 1-14.272-4.416c-6.144-3.072-11.136-10.752-6.336-20.16 1.536-3.008 8.96-10.304 10.752-11.712 19.84-11.328 42.88-7.68 64.192 0.896 19.712 8.064 34.56 22.848 56 43.776 21.952 25.28 25.792 32.384 38.4 51.328 9.856 14.848 18.816 30.208 24.96 47.616 3.776 10.88-1.152 19.776-14.08 25.28z"
                fill="#4D6BFE" p-id="4286"></path>
            </svg>
          </div>
        </div>
        <div class="right" data-index="1">
          <div class="summary-view">
            <div class="diagnose-time"></div>
            <div class="main-disease">
              <div class="disease-name"></div>
              <div class="probability"></div>
            </div>
          </div>
          <div class="detail">1</div>
        </div>
      </div>

      <div class="row">
        <div class="left">
          <div class="major1 major">
            <div class="tooltip">点击获取deepseek临床建议</div>
            <input type="file" id="zip-upload" hidden accept=".zip" multiple style="z-index: 1;">
            <svg t="1744121266789" class="icon" viewBox="0 0 1408 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
              p-id="4285" width="122" height="120">
              <path
                d="M1361.92 83.136c-14.272-7.04-20.416 6.272-28.736 12.992-2.816 2.24-5.248 5.12-7.68 7.68-20.8 22.336-45.056 36.864-76.8 35.136-46.464-2.56-86.08 12.032-121.152 47.616-7.552-43.904-32.256-70.08-69.888-86.912-19.712-8.768-39.68-17.472-53.376-36.48-9.664-13.44-12.288-28.48-17.216-43.264-3.008-8.96-6.08-18.112-16.32-19.712-11.2-1.728-15.552 7.68-19.968 15.424-17.536 32.128-24.32 67.52-23.68 103.296 1.6 80.448 35.52 144.576 103.04 190.144 7.68 5.312 9.6 10.56 7.168 18.176-4.608 15.68-10.048 30.976-14.912 46.592-3.072 10.112-7.68 12.352-18.304 8a308.224 308.224 0 0 1-97.28-66.176c-48-46.4-91.392-97.664-145.472-137.792a655.36 655.36 0 0 0-38.528-26.432c-55.232-53.76 7.232-97.792 21.632-103.04 15.104-5.376 5.312-24.128-43.52-23.936C652.032 24.704 607.36 41.024 550.4 62.72a156.8 156.8 0 0 1-26.048 7.68 542.016 542.016 0 0 0-161.408-5.696c-105.6 11.904-189.888 61.824-251.904 147.2C36.608 314.24 19.072 430.848 40.512 552.32c22.528 128 87.808 234.048 188.16 316.992 104 85.888 223.808 128 360.512 120 82.944-4.864 175.424-16 279.68-104.32 26.368 13.056 53.888 18.24 99.712 22.272 35.2 3.328 69.184-1.792 95.424-7.232 41.216-8.704 38.4-46.848 23.424-53.888-120.576-56.32-94.208-33.408-118.272-51.84 61.376-72.768 153.792-148.224 189.952-392.768 2.816-19.392 0.384-31.552 0-47.36-0.256-9.536 1.92-13.312 12.8-14.4a231.04 231.04 0 0 0 86.592-26.56c78.272-42.88 109.696-113.024 117.184-197.184 1.088-12.928-0.256-26.24-13.76-32.96z m-681.408 757.76c-116.928-92.096-173.696-122.368-197.12-120.96-21.888 1.152-17.984 26.304-13.184 42.624 5.12 16.128 11.648 27.328 20.8 41.408 6.464 9.408 10.752 23.424-6.272 33.92-37.76 23.424-103.232-7.872-106.24-9.472-76.288-44.8-140.032-104.192-184.96-185.344-43.264-78.08-68.48-161.92-72.576-251.328-1.152-21.632 5.184-29.312 26.688-33.152a265.6 265.6 0 0 1 85.696-2.24c119.296 17.472 220.928 71.04 306.048 155.52 48.768 48.32 85.504 105.92 123.392 162.176 40.256 59.776 83.648 116.672 138.88 163.392 19.392 16.32 35.072 28.8 49.92 37.952-44.928 5.056-119.872 6.08-171.008-34.496z m56.064-361.024a17.152 17.152 0 1 1 2.752 9.6 16.896 16.896 0 0 1-2.752-9.664z m174.08 89.472a102.72 102.72 0 0 1-33.024 8.96 70.528 70.528 0 0 1-44.736-14.272c-15.296-12.8-26.176-19.968-30.848-42.496a99.264 99.264 0 0 1 0.832-32.96c4.032-18.368-0.384-30.08-13.248-40.768-10.624-8.768-23.872-11.072-38.592-11.072a31.168 31.168 0 0 1-14.272-4.416c-6.144-3.072-11.136-10.752-6.336-20.16 1.536-3.008 8.96-10.304 10.752-11.712 19.84-11.328 42.88-7.68 64.192 0.896 19.712 8.064 34.56 22.848 56 43.776 21.952 25.28 25.792 32.384 38.4 51.328 9.856 14.848 18.816 30.208 24.96 47.616 3.776 10.88-1.152 19.776-14.08 25.28z"
                fill="#4D6BFE" p-id="4286"></path>
            </svg>
          </div>

        </div>
        <div class="right" data-index="2">
          <div class="summary-view">
            <div class="diagnose-time"></div>
            <div class="main-disease">
              <div class="disease-name"></div>
              <div class="probability"></div>
            </div>
          </div>
          <div class="detail">2</div>
        </div>
      </div>


      <div class="row">
        <div class="left">
          <div class="major1 major">
            <div class="tooltip">点击获取deepseek临床建议</div>
            <input type="file" id="zip-upload" hidden accept=".zip" multiple style="z-index: 1;">
            <svg t="1744121266789" class="icon" viewBox="0 0 1408 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
              p-id="4285" width="122" height="120">
              <path
                d="M1361.92 83.136c-14.272-7.04-20.416 6.272-28.736 12.992-2.816 2.24-5.248 5.12-7.68 7.68-20.8 22.336-45.056 36.864-76.8 35.136-46.464-2.56-86.08 12.032-121.152 47.616-7.552-43.904-32.256-70.08-69.888-86.912-19.712-8.768-39.68-17.472-53.376-36.48-9.664-13.44-12.288-28.48-17.216-43.264-3.008-8.96-6.08-18.112-16.32-19.712-11.2-1.728-15.552 7.68-19.968 15.424-17.536 32.128-24.32 67.52-23.68 103.296 1.6 80.448 35.52 144.576 103.04 190.144 7.68 5.312 9.6 10.56 7.168 18.176-4.608 15.68-10.048 30.976-14.912 46.592-3.072 10.112-7.68 12.352-18.304 8a308.224 308.224 0 0 1-97.28-66.176c-48-46.4-91.392-97.664-145.472-137.792a655.36 655.36 0 0 0-38.528-26.432c-55.232-53.76 7.232-97.792 21.632-103.04 15.104-5.376 5.312-24.128-43.52-23.936C652.032 24.704 607.36 41.024 550.4 62.72a156.8 156.8 0 0 1-26.048 7.68 542.016 542.016 0 0 0-161.408-5.696c-105.6 11.904-189.888 61.824-251.904 147.2C36.608 314.24 19.072 430.848 40.512 552.32c22.528 128 87.808 234.048 188.16 316.992 104 85.888 223.808 128 360.512 120 82.944-4.864 175.424-16 279.68-104.32 26.368 13.056 53.888 18.24 99.712 22.272 35.2 3.328 69.184-1.792 95.424-7.232 41.216-8.704 38.4-46.848 23.424-53.888-120.576-56.32-94.208-33.408-118.272-51.84 61.376-72.768 153.792-148.224 189.952-392.768 2.816-19.392 0.384-31.552 0-47.36-0.256-9.536 1.92-13.312 12.8-14.4a231.04 231.04 0 0 0 86.592-26.56c78.272-42.88 109.696-113.024 117.184-197.184 1.088-12.928-0.256-26.24-13.76-32.96z m-681.408 757.76c-116.928-92.096-173.696-122.368-197.12-120.96-21.888 1.152-17.984 26.304-13.184 42.624 5.12 16.128 11.648 27.328 20.8 41.408 6.464 9.408 10.752 23.424-6.272 33.92-37.76 23.424-103.232-7.872-106.24-9.472-76.288-44.8-140.032-104.192-184.96-185.344-43.264-78.08-68.48-161.92-72.576-251.328-1.152-21.632 5.184-29.312 26.688-33.152a265.6 265.6 0 0 1 85.696-2.24c119.296 17.472 220.928 71.04 306.048 155.52 48.768 48.32 85.504 105.92 123.392 162.176 40.256 59.776 83.648 116.672 138.88 163.392 19.392 16.32 35.072 28.8 49.92 37.952-44.928 5.056-119.872 6.08-171.008-34.496z m56.064-361.024a17.152 17.152 0 1 1 2.752 9.6 16.896 16.896 0 0 1-2.752-9.664z m174.08 89.472a102.72 102.72 0 0 1-33.024 8.96 70.528 70.528 0 0 1-44.736-14.272c-15.296-12.8-26.176-19.968-30.848-42.496a99.264 99.264 0 0 1 0.832-32.96c4.032-18.368-0.384-30.08-13.248-40.768-10.624-8.768-23.872-11.072-38.592-11.072a31.168 31.168 0 0 1-14.272-4.416c-6.144-3.072-11.136-10.752-6.336-20.16 1.536-3.008 8.96-10.304 10.752-11.712 19.84-11.328 42.88-7.68 64.192 0.896 19.712 8.064 34.56 22.848 56 43.776 21.952 25.28 25.792 32.384 38.4 51.328 9.856 14.848 18.816 30.208 24.96 47.616 3.776 10.88-1.152 19.776-14.08 25.28z"
                fill="#4D6BFE" p-id="4286"></path>
            </svg>
          </div>

        </div>
        <div class="right" data-index="3">
          <div class="summary-view">
            <div class="diagnose-time"></div>
            <div class="main-disease">
              <div class="disease-name"></div>
              <div class="probability"></div>
            </div>
          </div>
          <div class="detail">3</div>
        </div>
      </div>

      <div class="row">
        <div class="left">
          <div class="major1 major">
            <div class="tooltip">点击获取deepseek临床建议</div>
            <input type="file" id="zip-upload" hidden accept=".zip" multiple style="z-index: 1;">
            <svg t="1744121266789" class="icon" viewBox="0 0 1408 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
              p-id="4285" width="122" height="120">
              <path
                d="M1361.92 83.136c-14.272-7.04-20.416 6.272-28.736 12.992-2.816 2.24-5.248 5.12-7.68 7.68-20.8 22.336-45.056 36.864-76.8 35.136-46.464-2.56-86.08 12.032-121.152 47.616-7.552-43.904-32.256-70.08-69.888-86.912-19.712-8.768-39.68-17.472-53.376-36.48-9.664-13.44-12.288-28.48-17.216-43.264-3.008-8.96-6.08-18.112-16.32-19.712-11.2-1.728-15.552 7.68-19.968 15.424-17.536 32.128-24.32 67.52-23.68 103.296 1.6 80.448 35.52 144.576 103.04 190.144 7.68 5.312 9.6 10.56 7.168 18.176-4.608 15.68-10.048 30.976-14.912 46.592-3.072 10.112-7.68 12.352-18.304 8a308.224 308.224 0 0 1-97.28-66.176c-48-46.4-91.392-97.664-145.472-137.792a655.36 655.36 0 0 0-38.528-26.432c-55.232-53.76 7.232-97.792 21.632-103.04 15.104-5.376 5.312-24.128-43.52-23.936C652.032 24.704 607.36 41.024 550.4 62.72a156.8 156.8 0 0 1-26.048 7.68 542.016 542.016 0 0 0-161.408-5.696c-105.6 11.904-189.888 61.824-251.904 147.2C36.608 314.24 19.072 430.848 40.512 552.32c22.528 128 87.808 234.048 188.16 316.992 104 85.888 223.808 128 360.512 120 82.944-4.864 175.424-16 279.68-104.32 26.368 13.056 53.888 18.24 99.712 22.272 35.2 3.328 69.184-1.792 95.424-7.232 41.216-8.704 38.4-46.848 23.424-53.888-120.576-56.32-94.208-33.408-118.272-51.84 61.376-72.768 153.792-148.224 189.952-392.768 2.816-19.392 0.384-31.552 0-47.36-0.256-9.536 1.92-13.312 12.8-14.4a231.04 231.04 0 0 0 86.592-26.56c78.272-42.88 109.696-113.024 117.184-197.184 1.088-12.928-0.256-26.24-13.76-32.96z m-681.408 757.76c-116.928-92.096-173.696-122.368-197.12-120.96-21.888 1.152-17.984 26.304-13.184 42.624 5.12 16.128 11.648 27.328 20.8 41.408 6.464 9.408 10.752 23.424-6.272 33.92-37.76 23.424-103.232-7.872-106.24-9.472-76.288-44.8-140.032-104.192-184.96-185.344-43.264-78.08-68.48-161.92-72.576-251.328-1.152-21.632 5.184-29.312 26.688-33.152a265.6 265.6 0 0 1 85.696-2.24c119.296 17.472 220.928 71.04 306.048 155.52 48.768 48.32 85.504 105.92 123.392 162.176 40.256 59.776 83.648 116.672 138.88 163.392 19.392 16.32 35.072 28.8 49.92 37.952-44.928 5.056-119.872 6.08-171.008-34.496z m56.064-361.024a17.152 17.152 0 1 1 2.752 9.6 16.896 16.896 0 0 1-2.752-9.664z m174.08 89.472a102.72 102.72 0 0 1-33.024 8.96 70.528 70.528 0 0 1-44.736-14.272c-15.296-12.8-26.176-19.968-30.848-42.496a99.264 99.264 0 0 1 0.832-32.96c4.032-18.368-0.384-30.08-13.248-40.768-10.624-8.768-23.872-11.072-38.592-11.072a31.168 31.168 0 0 1-14.272-4.416c-6.144-3.072-11.136-10.752-6.336-20.16 1.536-3.008 8.96-10.304 10.752-11.712 19.84-11.328 42.88-7.68 64.192 0.896 19.712 8.064 34.56 22.848 56 43.776 21.952 25.28 25.792 32.384 38.4 51.328 9.856 14.848 18.816 30.208 24.96 47.616 3.776 10.88-1.152 19.776-14.08 25.28z"
                fill="#4D6BFE" p-id="4286"></path>
            </svg>
          </div>

        </div>
        <div class="right" data-index="4">
          <div class="summary-view">
            <div class="diagnose-time"></div>
            <div class="main-disease">
              <div class="disease-name"></div>
              <div class="probability"></div>
            </div>
          </div>
          <div class="detail">4</div>
        </div>
      </div>


      <div class="row">
        <div class="left">
          <div class="major1 major">
            <div class="tooltip">点击获取deepseek临床建议</div>
            <input type="file" id="zip-upload" hidden accept=".zip" multiple style="z-index: 1;">
            <svg t="1744121266789" class="icon" viewBox="0 0 1408 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
              p-id="4285" width="122" height="120">
              <path
                d="M1361.92 83.136c-14.272-7.04-20.416 6.272-28.736 12.992-2.816 2.24-5.248 5.12-7.68 7.68-20.8 22.336-45.056 36.864-76.8 35.136-46.464-2.56-86.08 12.032-121.152 47.616-7.552-43.904-32.256-70.08-69.888-86.912-19.712-8.768-39.68-17.472-53.376-36.48-9.664-13.44-12.288-28.48-17.216-43.264-3.008-8.96-6.08-18.112-16.32-19.712-11.2-1.728-15.552 7.68-19.968 15.424-17.536 32.128-24.32 67.52-23.68 103.296 1.6 80.448 35.52 144.576 103.04 190.144 7.68 5.312 9.6 10.56 7.168 18.176-4.608 15.68-10.048 30.976-14.912 46.592-3.072 10.112-7.68 12.352-18.304 8a308.224 308.224 0 0 1-97.28-66.176c-48-46.4-91.392-97.664-145.472-137.792a655.36 655.36 0 0 0-38.528-26.432c-55.232-53.76 7.232-97.792 21.632-103.04 15.104-5.376 5.312-24.128-43.52-23.936C652.032 24.704 607.36 41.024 550.4 62.72a156.8 156.8 0 0 1-26.048 7.68 542.016 542.016 0 0 0-161.408-5.696c-105.6 11.904-189.888 61.824-251.904 147.2C36.608 314.24 19.072 430.848 40.512 552.32c22.528 128 87.808 234.048 188.16 316.992 104 85.888 223.808 128 360.512 120 82.944-4.864 175.424-16 279.68-104.32 26.368 13.056 53.888 18.24 99.712 22.272 35.2 3.328 69.184-1.792 95.424-7.232 41.216-8.704 38.4-46.848 23.424-53.888-120.576-56.32-94.208-33.408-118.272-51.84 61.376-72.768 153.792-148.224 189.952-392.768 2.816-19.392 0.384-31.552 0-47.36-0.256-9.536 1.92-13.312 12.8-14.4a231.04 231.04 0 0 0 86.592-26.56c78.272-42.88 109.696-113.024 117.184-197.184 1.088-12.928-0.256-26.24-13.76-32.96z m-681.408 757.76c-116.928-92.096-173.696-122.368-197.12-120.96-21.888 1.152-17.984 26.304-13.184 42.624 5.12 16.128 11.648 27.328 20.8 41.408 6.464 9.408 10.752 23.424-6.272 33.92-37.76 23.424-103.232-7.872-106.24-9.472-76.288-44.8-140.032-104.192-184.96-185.344-43.264-78.08-68.48-161.92-72.576-251.328-1.152-21.632 5.184-29.312 26.688-33.152a265.6 265.6 0 0 1 85.696-2.24c119.296 17.472 220.928 71.04 306.048 155.52 48.768 48.32 85.504 105.92 123.392 162.176 40.256 59.776 83.648 116.672 138.88 163.392 19.392 16.32 35.072 28.8 49.92 37.952-44.928 5.056-119.872 6.08-171.008-34.496z m56.064-361.024a17.152 17.152 0 1 1 2.752 9.6 16.896 16.896 0 0 1-2.752-9.664z m174.08 89.472a102.72 102.72 0 0 1-33.024 8.96 70.528 70.528 0 0 1-44.736-14.272c-15.296-12.8-26.176-19.968-30.848-42.496a99.264 99.264 0 0 1 0.832-32.96c4.032-18.368-0.384-30.08-13.248-40.768-10.624-8.768-23.872-11.072-38.592-11.072a31.168 31.168 0 0 1-14.272-4.416c-6.144-3.072-11.136-10.752-6.336-20.16 1.536-3.008 8.96-10.304 10.752-11.712 19.84-11.328 42.88-7.68 64.192 0.896 19.712 8.064 34.56 22.848 56 43.776 21.952 25.28 25.792 32.384 38.4 51.328 9.856 14.848 18.816 30.208 24.96 47.616 3.776 10.88-1.152 19.776-14.08 25.28z"
                fill="#4D6BFE" p-id="4286"></path>
            </svg>

          </div>
        </div>
        <div class="right" data-index="5">
          <div class="summary-view">
            <div class="diagnose-time"></div>
            <div class="main-disease">
              <div class="disease-name"></div>
              <div class="probability"></div>
            </div>
          </div>
          <div class="detail">5</div>
        </div>
      </div>

      <div class="row">
        <div class="left">
          <div class="major1 major">
            <div class="tooltip">点击获取deepseek临床建议</div>
            <input type="file" id="zip-upload" hidden accept=".zip" multiple style="z-index: 1;">
            <svg t="1744121266789" class="icon" viewBox="0 0 1408 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
              p-id="4285" width="122" height="120">
              <path
                d="M1361.92 83.136c-14.272-7.04-20.416 6.272-28.736 12.992-2.816 2.24-5.248 5.12-7.68 7.68-20.8 22.336-45.056 36.864-76.8 35.136-46.464-2.56-86.08 12.032-121.152 47.616-7.552-43.904-32.256-70.08-69.888-86.912-19.712-8.768-39.68-17.472-53.376-36.48-9.664-13.44-12.288-28.48-17.216-43.264-3.008-8.96-6.08-18.112-16.32-19.712-11.2-1.728-15.552 7.68-19.968 15.424-17.536 32.128-24.32 67.52-23.68 103.296 1.6 80.448 35.52 144.576 103.04 190.144 7.68 5.312 9.6 10.56 7.168 18.176-4.608 15.68-10.048 30.976-14.912 46.592-3.072 10.112-7.68 12.352-18.304 8a308.224 308.224 0 0 1-97.28-66.176c-48-46.4-91.392-97.664-145.472-137.792a655.36 655.36 0 0 0-38.528-26.432c-55.232-53.76 7.232-97.792 21.632-103.04 15.104-5.376 5.312-24.128-43.52-23.936C652.032 24.704 607.36 41.024 550.4 62.72a156.8 156.8 0 0 1-26.048 7.68 542.016 542.016 0 0 0-161.408-5.696c-105.6 11.904-189.888 61.824-251.904 147.2C36.608 314.24 19.072 430.848 40.512 552.32c22.528 128 87.808 234.048 188.16 316.992 104 85.888 223.808 128 360.512 120 82.944-4.864 175.424-16 279.68-104.32 26.368 13.056 53.888 18.24 99.712 22.272 35.2 3.328 69.184-1.792 95.424-7.232 41.216-8.704 38.4-46.848 23.424-53.888-120.576-56.32-94.208-33.408-118.272-51.84 61.376-72.768 153.792-148.224 189.952-392.768 2.816-19.392 0.384-31.552 0-47.36-0.256-9.536 1.92-13.312 12.8-14.4a231.04 231.04 0 0 0 86.592-26.56c78.272-42.88 109.696-113.024 117.184-197.184 1.088-12.928-0.256-26.24-13.76-32.96z m-681.408 757.76c-116.928-92.096-173.696-122.368-197.12-120.96-21.888 1.152-17.984 26.304-13.184 42.624 5.12 16.128 11.648 27.328 20.8 41.408 6.464 9.408 10.752 23.424-6.272 33.92-37.76 23.424-103.232-7.872-106.24-9.472-76.288-44.8-140.032-104.192-184.96-185.344-43.264-78.08-68.48-161.92-72.576-251.328-1.152-21.632 5.184-29.312 26.688-33.152a265.6 265.6 0 0 1 85.696-2.24c119.296 17.472 220.928 71.04 306.048 155.52 48.768 48.32 85.504 105.92 123.392 162.176 40.256 59.776 83.648 116.672 138.88 163.392 19.392 16.32 35.072 28.8 49.92 37.952-44.928 5.056-119.872 6.08-171.008-34.496z m56.064-361.024a17.152 17.152 0 1 1 2.752 9.6 16.896 16.896 0 0 1-2.752-9.664z m174.08 89.472a102.72 102.72 0 0 1-33.024 8.96 70.528 70.528 0 0 1-44.736-14.272c-15.296-12.8-26.176-19.968-30.848-42.496a99.264 99.264 0 0 1 0.832-32.96c4.032-18.368-0.384-30.08-13.248-40.768-10.624-8.768-23.872-11.072-38.592-11.072a31.168 31.168 0 0 1-14.272-4.416c-6.144-3.072-11.136-10.752-6.336-20.16 1.536-3.008 8.96-10.304 10.752-11.712 19.84-11.328 42.88-7.68 64.192 0.896 19.712 8.064 34.56 22.848 56 43.776 21.952 25.28 25.792 32.384 38.4 51.328 9.856 14.848 18.816 30.208 24.96 47.616 3.776 10.88-1.152 19.776-14.08 25.28z"
                fill="#4D6BFE" p-id="4286"></path>
            </svg>

          </div>
        </div>
        <div class="right" data-index="6">
          <div class="summary-view">
            <div class="diagnose-time"></div>
            <div class="main-disease">
              <div class="disease-name"></div>
              <div class="probability"></div>
            </div>
          </div>
          <div class="detail">6</div>
        </div>
      </div>


      <div class="row">
        <div class="left">
          <div class="major1 major">
            <div class="tooltip">点击获取deepseek临床建议</div>
            <input type="file" id="zip-upload" hidden accept=".zip" multiple style="z-index: 1;">
            <svg t="1744121266789" class="icon" viewBox="0 0 1408 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
              p-id="4285" width="122" height="120">
              <path
                d="M1361.92 83.136c-14.272-7.04-20.416 6.272-28.736 12.992-2.816 2.24-5.248 5.12-7.68 7.68-20.8 22.336-45.056 36.864-76.8 35.136-46.464-2.56-86.08 12.032-121.152 47.616-7.552-43.904-32.256-70.08-69.888-86.912-19.712-8.768-39.68-17.472-53.376-36.48-9.664-13.44-12.288-28.48-17.216-43.264-3.008-8.96-6.08-18.112-16.32-19.712-11.2-1.728-15.552 7.68-19.968 15.424-17.536 32.128-24.32 67.52-23.68 103.296 1.6 80.448 35.52 144.576 103.04 190.144 7.68 5.312 9.6 10.56 7.168 18.176-4.608 15.68-10.048 30.976-14.912 46.592-3.072 10.112-7.68 12.352-18.304 8a308.224 308.224 0 0 1-97.28-66.176c-48-46.4-91.392-97.664-145.472-137.792a655.36 655.36 0 0 0-38.528-26.432c-55.232-53.76 7.232-97.792 21.632-103.04 15.104-5.376 5.312-24.128-43.52-23.936C652.032 24.704 607.36 41.024 550.4 62.72a156.8 156.8 0 0 1-26.048 7.68 542.016 542.016 0 0 0-161.408-5.696c-105.6 11.904-189.888 61.824-251.904 147.2C36.608 314.24 19.072 430.848 40.512 552.32c22.528 128 87.808 234.048 188.16 316.992 104 85.888 223.808 128 360.512 120 82.944-4.864 175.424-16 279.68-104.32 26.368 13.056 53.888 18.24 99.712 22.272 35.2 3.328 69.184-1.792 95.424-7.232 41.216-8.704 38.4-46.848 23.424-53.888-120.576-56.32-94.208-33.408-118.272-51.84 61.376-72.768 153.792-148.224 189.952-392.768 2.816-19.392 0.384-31.552 0-47.36-0.256-9.536 1.92-13.312 12.8-14.4a231.04 231.04 0 0 0 86.592-26.56c78.272-42.88 109.696-113.024 117.184-197.184 1.088-12.928-0.256-26.24-13.76-32.96z m-681.408 757.76c-116.928-92.096-173.696-122.368-197.12-120.96-21.888 1.152-17.984 26.304-13.184 42.624 5.12 16.128 11.648 27.328 20.8 41.408 6.464 9.408 10.752 23.424-6.272 33.92-37.76 23.424-103.232-7.872-106.24-9.472-76.288-44.8-140.032-104.192-184.96-185.344-43.264-78.08-68.48-161.92-72.576-251.328-1.152-21.632 5.184-29.312 26.688-33.152a265.6 265.6 0 0 1 85.696-2.24c119.296 17.472 220.928 71.04 306.048 155.52 48.768 48.32 85.504 105.92 123.392 162.176 40.256 59.776 83.648 116.672 138.88 163.392 19.392 16.32 35.072 28.8 49.92 37.952-44.928 5.056-119.872 6.08-171.008-34.496z m56.064-361.024a17.152 17.152 0 1 1 2.752 9.6 16.896 16.896 0 0 1-2.752-9.664z m174.08 89.472a102.72 102.72 0 0 1-33.024 8.96 70.528 70.528 0 0 1-44.736-14.272c-15.296-12.8-26.176-19.968-30.848-42.496a99.264 99.264 0 0 1 0.832-32.96c4.032-18.368-0.384-30.08-13.248-40.768-10.624-8.768-23.872-11.072-38.592-11.072a31.168 31.168 0 0 1-14.272-4.416c-6.144-3.072-11.136-10.752-6.336-20.16 1.536-3.008 8.96-10.304 10.752-11.712 19.84-11.328 42.88-7.68 64.192 0.896 19.712 8.064 34.56 22.848 56 43.776 21.952 25.28 25.792 32.384 38.4 51.328 9.856 14.848 18.816 30.208 24.96 47.616 3.776 10.88-1.152 19.776-14.08 25.28z"
                fill="#4D6BFE" p-id="4286"></path>
            </svg>

          </div>
        </div>
        <div class="right" data-index="7">
          <div class="summary-view">
            <div class="diagnose-time"></div>
            <div class="main-disease">
              <div class="disease-name"></div>
              <div class="probability"></div>
            </div>
          </div>
          <div class="detail">7</div>
        </div>
      </div>

      <div class="row">
        <div class="left">
          <div class="major1 major">
            <div class="tooltip">点击获取deepseek临床建议</div>
            <input type="file" id="zip-upload" hidden accept=".zip" multiple style="z-index: 1;">
            <svg t="1744121266789" class="icon" viewBox="0 0 1408 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
              p-id="4285" width="122" height="120">
              <path
                d="M1361.92 83.136c-14.272-7.04-20.416 6.272-28.736 12.992-2.816 2.24-5.248 5.12-7.68 7.68-20.8 22.336-45.056 36.864-76.8 35.136-46.464-2.56-86.08 12.032-121.152 47.616-7.552-43.904-32.256-70.08-69.888-86.912-19.712-8.768-39.68-17.472-53.376-36.48-9.664-13.44-12.288-28.48-17.216-43.264-3.008-8.96-6.08-18.112-16.32-19.712-11.2-1.728-15.552 7.68-19.968 15.424-17.536 32.128-24.32 67.52-23.68 103.296 1.6 80.448 35.52 144.576 103.04 190.144 7.68 5.312 9.6 10.56 7.168 18.176-4.608 15.68-10.048 30.976-14.912 46.592-3.072 10.112-7.68 12.352-18.304 8a308.224 308.224 0 0 1-97.28-66.176c-48-46.4-91.392-97.664-145.472-137.792a655.36 655.36 0 0 0-38.528-26.432c-55.232-53.76 7.232-97.792 21.632-103.04 15.104-5.376 5.312-24.128-43.52-23.936C652.032 24.704 607.36 41.024 550.4 62.72a156.8 156.8 0 0 1-26.048 7.68 542.016 542.016 0 0 0-161.408-5.696c-105.6 11.904-189.888 61.824-251.904 147.2C36.608 314.24 19.072 430.848 40.512 552.32c22.528 128 87.808 234.048 188.16 316.992 104 85.888 223.808 128 360.512 120 82.944-4.864 175.424-16 279.68-104.32 26.368 13.056 53.888 18.24 99.712 22.272 35.2 3.328 69.184-1.792 95.424-7.232 41.216-8.704 38.4-46.848 23.424-53.888-120.576-56.32-94.208-33.408-118.272-51.84 61.376-72.768 153.792-148.224 189.952-392.768 2.816-19.392 0.384-31.552 0-47.36-0.256-9.536 1.92-13.312 12.8-14.4a231.04 231.04 0 0 0 86.592-26.56c78.272-42.88 109.696-113.024 117.184-197.184 1.088-12.928-0.256-26.24-13.76-32.96z m-681.408 757.76c-116.928-92.096-173.696-122.368-197.12-120.96-21.888 1.152-17.984 26.304-13.184 42.624 5.12 16.128 11.648 27.328 20.8 41.408 6.464 9.408 10.752 23.424-6.272 33.92-37.76 23.424-103.232-7.872-106.24-9.472-76.288-44.8-140.032-104.192-184.96-185.344-43.264-78.08-68.48-161.92-72.576-251.328-1.152-21.632 5.184-29.312 26.688-33.152a265.6 265.6 0 0 1 85.696-2.24c119.296 17.472 220.928 71.04 306.048 155.52 48.768 48.32 85.504 105.92 123.392 162.176 40.256 59.776 83.648 116.672 138.88 163.392 19.392 16.32 35.072 28.8 49.92 37.952-44.928 5.056-119.872 6.08-171.008-34.496z m56.064-361.024a17.152 17.152 0 1 1 2.752 9.6 16.896 16.896 0 0 1-2.752-9.664z m174.08 89.472a102.72 102.72 0 0 1-33.024 8.96 70.528 70.528 0 0 1-44.736-14.272c-15.296-12.8-26.176-19.968-30.848-42.496a99.264 99.264 0 0 1 0.832-32.96c4.032-18.368-0.384-30.08-13.248-40.768-10.624-8.768-23.872-11.072-38.592-11.072a31.168 31.168 0 0 1-14.272-4.416c-6.144-3.072-11.136-10.752-6.336-20.16 1.536-3.008 8.96-10.304 10.752-11.712 19.84-11.328 42.88-7.68 64.192 0.896 19.712 8.064 34.56 22.848 56 43.776 21.952 25.28 25.792 32.384 38.4 51.328 9.856 14.848 18.816 30.208 24.96 47.616 3.776 10.88-1.152 19.776-14.08 25.28z"
                fill="#4D6BFE" p-id="4286"></path>
            </svg>
          </div>

        </div>
        <div class="right" data-index="8">
          <div class="summary-view">
            <div class="diagnose-time"></div>
            <div class="main-disease">
              <div class="disease-name"></div>
              <div class="probability"></div>
            </div>
          </div>
          <div class="detail">8</div>
        </div>
      </div>
    </div>

    <div class="right-button-group">
      <a href="主页.html">
        <li class="dot first "></li>
      </a>
      <a href="诊断.html">
        <li class="dot second"></li>
      </a>
      <a href="#">
        <li class="dot third active"></li>
      </a>
      <a href="个人信息.html">
        <li class="dot fourth"></li>
      </a>
    </div>


    <!-- AI对话弹窗 -->
    <div class="ai-dialog-modal" role="dialog" aria-labelledby="aiDialogTitle">
      <div class="loading-overlay">
        <div class="loading-message">正在生成临床建议，请稍后...</div>
        <div class="loading-spinner2">

        </div>
      </div>
      <div class="ai-dialog-content">
        <div class="ai-header">
          <h3>AI临床建议助手</h3>
          <button class="close-btn">&times;</button>
        </div>
        <div class="ai-conversation">
          <div class="messages"></div>
          <div class="input-group">
            <input type="text" placeholder="输入您的问题..." class="ai-input">
            <button class="send-btn">发送</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script src="./js/jquery-3.7.1.js"></script>
  <script src="./js/bootstrap.min.js"></script>
  <script src="./js/search.js"></script>
  <script type="module">
    import { marked } from 'https://cdn.jsdelivr.net/npm/marked/lib/marked.esm.js';
    import { AIService } from './js/ai-service.js';
    let currentRow = 0; // 当前展示的行索引  
    const rows = document.querySelectorAll('.row'); // 获取所有的行  
    const totalRows = rows.length; // 总的行数量  
    const rowsToShow = 2; // 每次展示的行数量  

    // 初始化显示的行  
    function initDisplay() {
      for (let i = 0; i < Math.min(rowsToShow, totalRows); i++) {
        rows[i].classList.add('show'); // 添加显示类  
      }
    }

    // 观察元素的可见性  
    const observerOptions = {
      root: document.querySelector('.container'), // 观察器的根  
      rootMargin: '0px',
      threshold: 0.5 // 50% 进入视口时触发  
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('show'); // 当行的一半可见时显示  
        } else {
          entry.target.classList.remove('show'); // 当行不可见时隐藏  
        }
      });
    }, observerOptions);

    // 观察每一行  
    rows.forEach(row => {
      observer.observe(row); // 开始观察行  
    });

    // 防抖函数  
    function debounce(func, delay) {
      let timeout;
      return function (...args) {
        const context = this;
        clearTimeout(timeout);
        timeout = setTimeout(() => func.apply(context, args), delay);
      };
    }

    // 滚动事件  
    window.addEventListener('wheel', debounce(function (event) {
      // 处理额外的行显示或其他逻辑  
    }, 300)); // 设置防抖时间为300毫秒  
    // 设置right初始内容
    const right = document.querySelectorAll('.right');
    right.forEach((item, index) => {
      item.innerHTML += ` <div class="reminder"> 请点击右下角按钮查看详情！ </div>
      <div class='id'> 报告编号：${JSON.parse(localStorage.getItem('resultIds'))[index]?.resultId || '暂无编号，请先上传结果！'} </div>
      `
    });
    // 初始化  
    initDisplay();



    import { diagnose_details } from './API/diagnose_details.js';
    // 为每个圆点添加点击事件监听器
    let activeRightBig = null;

    async function handleDetailClick(e) {
      e.stopPropagation();
      const detail = e.target.closest('.detail');
      detail.classList.add('loading');
      detail.setAttribute('data-processed', 'true');
      const index = detail.closest('.right').getAttribute('data-index');
      console.log(index);
      // 如果是已激活状态则直接返回
      if (detail.classList.contains('detail-active')) return;
      console.log(JSON.parse(localStorage.getItem('resultIds')).length);
      if (JSON.parse(localStorage.getItem('resultIds')).length === (index - 1)) {
        alert('该病例暂无结果，请等待结果生成！');
        return;
      }
      const right = detail.closest('.right');
      const diagnoseId = JSON.parse(localStorage.getItem('resultIds'))[index - 1].resultId || '';// 确保元素有 data-diagnose-id 属性
      console.log(diagnoseId);
      const row = right.parentElement;

      // 显示加载状态
      right.innerHTML = '<div class="loading-spinner"></div>';
      try {
        // 发送请求
        const response = await diagnose_details(diagnoseId)

        console.log('加载成功:', response);

        // 生成内容模板
        const data = response.data;
        // const diseases = data.report.predictionResultsList[0].diseases;
        // console.log(diseases);
        // 生成完整报告内容
        const detailsContent = `
      <div class="diagnose-content2">
        ${generateSummaryView(data)}
        ${generateFullTable(data)}
      </div>
      <div class="detail "></div>
    `;

        // 替换内容
        right.innerHTML = detailsContent;

        // 重新绑定事件
        rebindDetailEvents(right);

        // 展开视图
        openExpandedView(right, row);
      }
      catch (error) {
        console.error('加载失败:', error);
        // 生成错误提示并保留圆点
        right.innerHTML = `
        <div class="error">服务器出错，无法加载详情<br>按esc键关闭</div>
        <div class="detail"></div>
      `;

        // 重新绑定事件
        rebindDetailEvents(right);
        openExpandedView(right, row);
        // 3秒后恢复默认状态
        setTimeout(() => {
          right.innerHTML = '<div class="detail"></div>';
          rebindDetailEvents(right);
        }, 3000);
      } finally {
        // 移除加载状态
        detail.classList.remove('loading');
      };

      function generateSummaryView(data) {
        const firstResult = data.report.predictionResultsList[0].diseases;
        let maxProb = 0;
        let mainDisease = '';

        // 找出概率最高的疾病
        Object.entries(firstResult).forEach(([name, info]) => {
          if (info.probability > maxProb) {
            maxProb = info.probability;
            mainDisease = name;
          }
        });

        return `
    <div class="summary-view">
      <div class="diagnose-time">${new Date(data.time).toLocaleString()} 诊断结果：</div>
      <div class="main-disease">
        <span class="disease-name">${mainDisease}</span>
        <span class="probability">${(maxProb * 100).toFixed(2)}%</span>
      </div>
    </div>
  `;
      }

      // 生成完整表格（复用诊断页面的表格生成逻辑）
      function generateFullTable(data) {
        console.log(data.report.diagnoseMode);
        const isoTime = data.time;
        const date = new Date(isoTime);
        const predictions = data.report.predictionResultsList;
        // 将日期格式化为易读的字符串  
        const options = { year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false };
        const formattedDate = date.toLocaleString('zh-CN', options);
        if (data.report.diagnoseMode === "personal") {
          return `
    <div class="diagnose-report">
      <h3>完整诊断报告</h3>
      <div class="diagnose-info">
        <p>报告编号：${data.id}</p>
      <p>用户：${data.username}</p>
      <p>诊断模式：${data.report.diagnoseMode}</p>
      <p>报告时间：${formattedDate}</p>
      </div>
       ${predictions.map((result, index) => `
       <div class="prediction-group">
        <h4>预测结果 ${index + 1}</h4>
      <table class="disease-table">
       
        <!-- 复用之前实现的表格结构 -->
        ${Object.entries(result.diseases).map(([name, info]) => `
          <tr>
            <td>${name}</td>
            <td>
              <div class="probability-bar" style="width: ${info.probability * 100}%"></div>
              ${(info.probability * 100).toFixed(2)}%
            </td>
            <td class="${info.status ? 'status-abnormal' : 'status-normal'}">
              ${info.status ? '异常' : '正常'}
            </td>
          </tr>
        `).join('')}
      </table>
                </div>
        `).join('')}
      <div class="image-links">
        
        ${data.urlList.map((url, index) => `
          <a href="${url}" target="_blank" style="text-decoration: none; color: #fff;">查看原始图片${index + 1}</a>
        `).join('')}
      </div>
      <div class="note">>按esc键或点击外围任意位置关闭<</div>
    </div>
  `;
        }
        else {
          return `    <div class="diagnose-report">
      <h3>完整诊断报告</h3>
      <div class="diagnose-info">
        <p>报告编号：${data.id}</p>
      <p>用户：${data.username}</p>
      <p>诊断模式：${data.report.diagnoseMode}</p>
      <p>报告时间：${formattedDate}</p>
      </div>
       ${predictions.map((result, index) => `
       <div class="prediction-group">
        <h4>预测结果</h4>
      <table class="disease-table">
       
        <!-- 复用之前实现的表格结构 -->
        ${Object.entries(result.diseases).map(([name, info]) => `
          <tr>
            <td>${name}</td>
            <td>
              <div class="probability-bar" style="width: ${info.probability * 100}%"></div>
              ${(info.probability * 100).toFixed(2)}%
            </td>
            <td class="${info.status ? 'status-abnormal' : 'status-normal'}">
              ${info.status ? '异常' : '正常'}
            </td>
          </tr>
        `).join('')}
      </table>
                </div>
        `).join('')}
      <div class="image-links">
        
        ${data.urlList.map((url, index) => `
          <a href="${url}" target="_blank" style="text-decoration: none; color: #fff;">下载原图片压缩包${index + 1}</a>
        `).join('')}
      </div>
      <div class="note">>按esc键或点击外围任意位置关闭<</div>
    </div>
  `;
        }
      }
      // 在容器初始化时加载历史数据
      function initHistoryData() {
        const diagnoses = JSON.parse(localStorage.getItem('diagnoses')) || [];

        document.querySelectorAll('.row').forEach((row, index) => {
          const data = diagnoses[index];
          if (!data) return;

          const right = row.querySelector('.right');
          const summary = generateSummaryView({
            time: data.timestamp,
            report: { predictionResultsList: [] }
          });

          right.querySelector('.summary-view').innerHTML = summary;
        });
      }
      initHistoryData();

      // 动态创建tooltip元素
      function initTooltips() {
        document.querySelectorAll('.detail').forEach(detail => {
          if (!detail.querySelector('.detail-tooltip')) {
            const tooltip = document.createElement('div');
            tooltip.className = 'detail-tooltip';
            tooltip.textContent = '点击查看完整报告';
            detail.appendChild(tooltip);

            // 动态定位
            const updatePosition = () => {
              const rect = detail.getBoundingClientRect();
              tooltip.style.top = `${rect.top + rect.height / 2}px`;
              tooltip.style.left = `${rect.right + 10}px`;
            };

            // 初始化位置
            updatePosition();

            // 窗口变化时更新位置
            window.addEventListener('resize', debounce(updatePosition, 100));
          }
        });
      }

      // 在DOM加载后初始化
      document.addEventListener('DOMContentLoaded', () => {
        initTooltips();
        // 监听动态加载的内容
        const observer = new MutationObserver(mutations => {
          mutations.forEach(mutation => {
            if (mutation.addedNodes) {
              initTooltips();
            }
          });
        });
        observer.observe(document.body, { childList: true, subtree: true });
      });
    }

    // 修改事件绑定方式（使用事件委托）
    document.querySelector('.container').addEventListener('click', async (e) => {
      if (e.target.closest('.detail')) {
        handleDetailClick(e);
      }
    });

    // 新增函数：重新绑定事件
    function rebindDetailEvents(container) {
      const newDetail = container.querySelector('.detail');
      if (newDetail) {
        newDetail.addEventListener('click', handleDetailClick);
      }
    }


    function openExpandedView(originRight, originRow) {
      // 创建遮罩层
      const mask = document.createElement('div');
      mask.className = 'overlay-mask';
      document.body.appendChild(mask);

      // 创建right-big元素（复用逻辑）
      const rightBig = document.querySelector('.right-big') || createRightBigElement();
      rightBig.innerHTML = originRight.innerHTML;
      // 增添rightbig复制过来的detail的classlist
      const detail = rightBig.querySelector('.detail');
      detail.classList.add('detail-active');
      detail.classList.add('transparent');
      // 设置当前的right_big的data-index等于对应right的data-index
      rightBig.setAttribute('data-index', originRight.getAttribute('data-index'));

      // 记录原始位置
      const rect = originRight.getBoundingClientRect();
      rightBig.style.transformOrigin = `${rect.right}px ${rect.top}px`;

      // 设置初始状态
      rightBig.classList.add('expanded');
      originRight.classList.add('expanded');
      originRow.classList.add('row-animate-out');

      // 隐藏其他元素
      setTimeout(() => {
        document.querySelectorAll('.row').forEach(row => {
          if (row !== originRow) row.classList.add('row-animate-out');
        });
      }, 200);
      // 添加交互事件
      mask.addEventListener('click', () => closeExpandedView(originRight));
      document.addEventListener('keydown', handleEscKey);
    }

    function closeExpandedView(originRight) {
      const rightBig = document.querySelector('.right-big');
      const originRow = originRight.parentElement;
      const mask = document.querySelector('.overlay-mask');

      originRight.classList.remove('expanded');
      originRow.classList.remove('row-animate-out');


      // 延迟移除元素
      if (mask) mask.remove();
      rightBig.classList.remove('expanded');
      setTimeout(() => {
        rightBig.remove();
      }, 200);
      setTimeout(() => {
        // 恢复其他元素
        document.querySelectorAll('.row.row-animate-out').forEach(row => {
          row.classList.remove('row-animate-out');
        });
      }, 100);

      document.removeEventListener('keydown', handleEscKey);
    }

    function createRightBigElement() {
      const rightBig = document.createElement('div');
      rightBig.className = 'right-big';
      document.body.appendChild(rightBig);
      return rightBig;
    }

    function handleEscKey(e) {
      if (e.key === 'Escape') {
        const expanded = document.querySelector('.right.expanded');
        if (expanded) closeExpandedView(expanded);
      }
    }
    // // 在DOM加载完成后调用
    // document.addEventListener('DOMContentLoaded', () => {
    //   initDisplay();
    //   initHistoryData();
    // });
    let chatHistory = [];
    // 新增：点击左侧元素触发AI对话
    document.querySelector('.container').addEventListener('click', async (e) => {
      const leftElement = e.target.closest('.left');
      if (!leftElement) return;

      const row = leftElement.closest('.row');
      const rightElement = row.querySelector('.right');
      const index = rightElement.getAttribute('data-index');
      const diagnoseId = JSON.parse(localStorage.getItem('resultIds'))[index - 1]?.resultId;

      if (!diagnoseId) {
        alert('未找到对应诊断数据');
        return;
      }

      const aiDialog = document.querySelector('.ai-dialog-modal');
      aiDialog.style.display = 'block';

      try {
        const aiInput = document.querySelector('.ai-input');
        const sendBtn = document.querySelector('.send-btn');
        const loading = document.querySelector('.loading-overlay');
        aiInput.value = '';

        // 禁用输入框和发送按钮
        aiInput.classList.add('disabled');
        sendBtn.classList.add('disabled');
        loading.style.display = 'flex';

        const response = await diagnose_details(diagnoseId);
        const reportData = response.data;

        // 调用新接口
        const aiResponse = await AIService.getClinicalAdvice(reportData);

        const messagesDiv = aiDialog.querySelector('.messages');
        const content = aiResponse.data;

        messagesDiv.innerHTML = `
      <div class="message ai">
        ${content ? marked.parse(content) : '未收到有效回复'}
        <span class="message-time">${new Date().toLocaleTimeString()}</span>
      </div>
    `;
      } catch (error) {
        console.error('AI建议获取失败:', error);
        const messagesDiv = aiDialog.querySelector('.messages');
        messagesDiv.innerHTML += `
      <div class="message ai error">
        临床建议获取失败：${error.message}
        <span class="message-time">${new Date().toLocaleTimeString()}</span>
      </div>
    `;
      }
      finally {
        // 启用输入框和发送按钮
        const aiInput = document.querySelector('.ai-input');
        const sendBtn = document.querySelector('.send-btn');
        const loading = document.querySelector('.loading-overlay');
        aiInput.classList.remove('disabled');
        sendBtn.classList.remove('disabled');
        loading.style.display = 'none';
      }
    });

    // 关闭对话框逻辑
    document.querySelector('.close-btn').addEventListener('click', () => {
      document.querySelector('.ai-dialog-modal').style.display = 'none';
    });

    // ESC键关闭
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        document.querySelector('.ai-dialog-modal').style.display = 'none';
      }
    });

    function initAIChat() {
      const sendBtn = document.querySelector('.send-btn');
      const aiInput = document.querySelector('.ai-input');
      const messagesDiv = document.querySelector('.messages');

      // 发送按钮点击事件
      sendBtn.addEventListener('click', async () => {
        await handleUserMessage(aiInput.value.trim());
      });

      // 回车键事件
      aiInput.addEventListener('keypress', async (e) => {
        if (e.key === 'Enter' && !e.shiftKey) {
          e.preventDefault();
          await handleUserMessage(aiInput.value.trim());
        }
      });

      // 自动滚动到底部
      function scrollToBottom() {
        const messagesDiv = document.querySelector('.message');
        messagesDiv.scrollTop = messagesDiv.scrollHeight;
      }

      // 处理用户消息
      async function handleUserMessage(content) {
        if (!content) return;

        const aiInput = document.querySelector('.ai-input');
        const sendBtn = document.querySelector('.send-btn');
        const loading = document.querySelector('.loading-overlay');
        aiInput.value = '';

        // 禁用输入框和发送按钮
        aiInput.classList.add('disabled');
        sendBtn.classList.add('disabled');
        loading.style.display = 'flex';

        // 添加用户消息
        addMessage('user', content);

        try {
          addLoadingIndicator();

          // 调用新接口
          const aiResponse = await AIService.chatWithAI([
            ...chatHistory,
            { role: "user", content }
          ]);

          removeLoadingIndicator();

          // 处理响应格式
          const aiContent = aiResponse.choices?.[0]?.message?.content || aiResponse.response;
          addMessage('ai', aiContent);

          chatHistory.push(
            { role: "user", content },
            { role: "assistant", content: aiContent }
          );
        } catch (error) {
          removeLoadingIndicator();
          addMessage('ai', `请求失败：${error.message}`, true);
        }
        $loading.hide();
        $aiInput.prop('disabled', false);
        $sendBtn.prop('disabled', false);
        $aiInput.focus(); // 恢复焦点
      }


      // 添加消息到对话框
      function addMessage(role, content, isError = false) {
        const messageDiv = document.createElement('div');
        messageDiv.className = `message ${role}${isError ? ' error' : ''}`;
        messageDiv.innerHTML = `
      ${role === 'ai' ? marked.parse(content) : content}
      <span class="message-time">${new Date().toLocaleTimeString()}</span>
    `;
        messagesDiv.appendChild(messageDiv);
        scrollToBottom();
      }

      // 加载状态指示器
      function addLoadingIndicator() {
        const loadingDiv = document.createElement('div');
        loadingDiv.className = 'message ai loading';
        loadingDiv.innerHTML = `
      <div class="loading-dots">
        <span></span>
        <span></span>
        <span></span>
      </div>
    `;
        messagesDiv.appendChild(loadingDiv);
        scrollToBottom();
      }

      function removeLoadingIndicator() {
        const loadingElements = document.querySelectorAll('.message.loading');
        loadingElements.forEach(el => el.remove());
      }
    }

    // 初始化对话功能
    document.addEventListener('DOMContentLoaded', initAIChat);
  </script>
</body>

</html>